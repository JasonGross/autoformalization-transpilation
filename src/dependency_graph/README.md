# Dependency Graph of Logical Foundations

This repository contains scripts to build and visualize a dependency graph of the Logical Foundations project.

## Instructions

1. **Generate Dependency Graphs:**
    - Run the `generate_dgraph.sh` script:
      ```sh
      ./generate_dgraph.sh
      ```
      This script processes each Coq file listed in the script, generates its dependency graph using `depth_graph.v`, and saves the results in the specified output directory. It then runs `combine_graph.py` to merge the individual graphs.

2. **Visualize Dependency Graphs:**
    - Open the [plot.ipynb](http://_vscodecontentref_/0) Jupyter Notebook to visualize the dependency graphs.
    - The notebook provides various visualizations, including:
      - Spring Layout of the Dependency Graph
      - Node Degree Histogram
      - Dependency Graph with Unique Colors per File
      - Dependency Graph Shaded by Neighbor Count
      - Layered Dependency Waves (colored by file)

## File Descriptions

- **generate_dgraph.sh**: This script processes each Coq file, generates its dependency graph using `depth_graph.v`, and saves the results in the output directory. It then runs `combine_graph.py` to merge the individual graphs.

- **depth_graph.v**: This Coq file is used to generate the dependency graph for a given Coq file. It uses the `dpdgraph` library to print the dependency graph.

- **dgraph.dpd**: This file contains the merged dependency graph of all processed Coq files. It is generated by `combine_graph.py`.

- **combine_graph.py**: This script reads all individual `.dpd` files from the output directory, assigns unique global IDs to nodes, and merges the graphs into a single `dgraph.dpd` file.

- **plot.ipynb**: This Jupyter Notebook provides various visualizations for the dependency graphs, including spring layout, node degree histogram, unique file colors, neighbor count shading, and layered dependency waves.

## Additional Information

- The `generate_dgraph.sh` script creates temporary Coq files for each file being processed, runs `coqc` to generate the dependency graph, and then cleans up the temporary files.

- The `combine_graph.py` script ensures that each node in the final graph has a unique global ID and preserves the attributes and edges from the individual graphs.

- The [plot.ipynb](http://_vscodecontentref_/1) notebook uses NetworkX and Plotly to create interactive visualizations of the dependency graphs. The theorems are also topologically sorted in the visualizations.

By following these instructions, you can generate, merge, and visualize dependency graphs for the Logical Foundations project.